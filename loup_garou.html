<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Jeu du Loup-Garou</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #222;
      color: #eee;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }
    #log {
      width: 80%;
      max-width: 800px;
      height: 400px;
      background: #111;
      border: 2px solid #555;
      border-radius: 8px;
      padding: 10px;
      overflow-y: auto;
      margin-bottom: 15px;
      font-size: 16px;
    }
    #inputZone {
      display: flex;
      gap: 10px;
    }
    #message {
      flex: 1;
      padding: 8px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #444;
    }
    button {
      padding: 8px 15px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      background: #444;
      color: #eee;
    }
    button:hover {
      background: #666;
    }
  </style>
</head>
<body>
  <h1>Jeu du Loup-Garou</h1>
  <div id="log"></div>
  <div id="inputZone">
    <input id="message" type="text" maxlength="20" placeholder="Écris ton message (20 max)">
    <button onclick="parler()">Parler</button>
  </div>

  <script>
    const log = document.getElementById("log");

    const joueurs = ["J1 (Toi)", "J2", "J3", "J4", "J5"];
    const roles = {
      "J1 (Toi)": "Villageois",
      "J2": "Loup",
      "J3": "Villageois",
      "J4": "Loup",
      "J5": "Villageois"
    };

    function ajouterTexte(texte) {
      log.innerHTML += texte + "<br>";
      log.scrollTop = log.scrollHeight;
    }

    function parler() {
      const input = document.getElementById("message");
      const msg = input.value.trim();
      if (msg.length > 0) {
        ajouterTexte(`<b>J1 (Toi):</b> ${msg}`);
        input.value = "";
        tourDeParole();
      }
    }

    function tourDeParole() {
      let i = 1; // J2 commence après J1
      const dialogues = [
        "Moi je suis innocent !",
        "Je pense que J1 est suspect...",
        "Non non, je vous jure que je suis villageois !",
        "Et si on éliminait J3 ?",
        "Je crois que les loups se cachent bien..."
      ];

      function botParle() {
        if (i < joueurs.length) {
          ajouterTexte(`<b>${joueurs[i]}:</b> ${dialogues[Math.floor(Math.random() * dialogues.length)]}`);
          i++;
          setTimeout(botParle, 2000); // délai de 2s entre chaque joueur
        } else {
          ajouterTexte("<i>Fin du tour de discussion.</i>");
        }
      }
      setTimeout(botParle, 2000);
    }

    // intro
    ajouterTexte("<i>La partie commence ! Tous les joueurs sont rassemblés pour discuter...</i>");
  </script>
</body>
</html>
